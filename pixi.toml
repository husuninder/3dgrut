[workspace]
name = "3dgrut"
version = "0.1.0"
description = "3D Gaussian Ray Tracing and Unscented Transform - Minimal Python packages only"
authors = ["NVIDIA"]
channels = ["conda-forge"]
platforms = ["linux-64"]

[dependencies]
python = "3.11.*"
pip = "*"

# Essential dependencies for running training
hydra-core = "*"
#omegaconf = "*"
#numpy = "*"
#plyfile = "*"
#tensorboard = "*"
#fire = "*"
#scikit-learn = "*"
#wandb = "*"
#rich = "*"
#einops = "*"
#imageio = "*"
#tqdm = "*"
#setuptools = "*"
#addict = "*"
#msgpack-python = "*"
#dataclasses-json = "*"
#piexif = "*"

[pypi-dependencies]
# PyTorch-dependent packages (assuming PyTorch is already in Docker)
#torchmetrics = "*"
#kornia = "*"
# Other required packages
#libigl = "*"
#usd-core = "*"
#opencv-python = "*"
#slangtorch = "==1.3.4"
#pygltflib = "*"
#polyscope = ">=2.3.0"

[tasks]
# Initialize git submodules
init-submodules = "git submodule update --init --recursive"

# Install fused-ssim
install-fused-ssim = "pip install --no-build-isolation git+https://github.com/rahul-goel/fused-ssim@1272e21a282342e89537159e4bad508b19b34157"

# Install ppisp
install-ppisp = "pip install --no-build-isolation git+https://github.com/nv-tlabs/ppisp@v1.0.1"

# Install the package in editable mode
install-package = "pip install --no-build-isolation -e ."

# Complete installation (run after pixi install)
install-all = { cmd = "pixi run init-submodules && pixi run install-fused-ssim && pixi run install-ppisp && pixi run install-package" }

# Training commands
train = "python train.py"
render = "python render.py"
playground = "python playground.py"
